<!doctype html><html lang=en-us><head><link href=https://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="With the SQL language you can search for multiple terms in a given field using the `IN` operator. In Solr, it's a bit different."><link rel=canonical href=https://harmstyler.me/posts/2012/solr-query-for-mimicking-sql-in-operator-functionality/><title>Solr Query for Mimicking SQL IN Operator Functionality &#183; Tyler Harms</title><meta name=twitter:card content="summary"><meta name=twitter:title content="Solr Query for Mimicking SQL IN Operator Functionality"><meta name=twitter:description content="With the SQL language you can search for multiple terms in a given field using the `IN` operator. In Solr, it's a bit different."><meta property="og:url" content="https://harmstyler.me/posts/2012/solr-query-for-mimicking-sql-in-operator-functionality/"><meta property="og:site_name" content="Tyler Harms"><meta property="og:title" content="Solr Query for Mimicking SQL IN Operator Functionality"><meta property="og:description" content="With the SQL language you can search for multiple terms in a given field using the `IN` operator. In Solr, it's a bit different."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2012-09-13T00:00:00+00:00"><meta property="article:modified_time" content="2012-09-13T00:00:00+00:00"><meta property="article:tag" content="EZ Find"><meta property="article:tag" content="Solr"><meta property="article:tag" content="SQL"><meta itemprop=name content="Solr Query for Mimicking SQL IN Operator Functionality"><meta itemprop=description content="With the SQL language you can search for multiple terms in a given field using the `IN` operator. In Solr, it's a bit different."><meta itemprop=datePublished content="2012-09-13T00:00:00+00:00"><meta itemprop=dateModified content="2012-09-13T00:00:00+00:00"><meta itemprop=wordCount content="325"><meta itemprop=keywords content="EZ Find,Solr,SQL"><meta name=generator content="Hugo 0.154.5"><meta name=copyright content="Tyler Harms"><meta name=author content="Tyler Harms"><link rel=stylesheet href=https://harmstyler.me/css/syntax.min.526c7855d123d38fb872630d4fd87414145f1c4718e03de5cdec1c1fbdd44f3458c31f6ef3f67ba28a296a00ba072faf897644f22e1360bf7265b512a40017fa.css integrity="sha512-Umx4VdEj04+4cmMNT9h0FBRfHEcY4D3lzewcH73UTzRYwx9u8/Z7ooopagC6By+viXZE8i4TYL9yZbUSpAAX+g==" media=screen><link rel=stylesheet href=/scss/hyde-hyde.51d9e06a8e337f8159a7ffa08e5d6e735ddf5ae6fe9cf8e99fb22367a5fcc195.css integrity="sha256-Udngao4zf4FZp/+gjl1uc13fWub+nPjpn7IjZ6X8wZU="><link rel=stylesheet href=/scss/print.1850a99a7deb72f7243ff99e7a0dfc548ba8837498518c98cc1e44fa65bf1678.css integrity="sha256-GFCpmn3rcvckP/meeg38VIuog3SYUYyYzB5E+mW/Fng=" media=print><link rel=apple-touch-icon sizes=76x76 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#6a9fb5"><meta name=description content="With the SQL language you can search for multiple terms in a given field using the `IN` operator. In Solr, it's a bit different."></head><body class=theme-base-0d><div class=sidebar><div class=container><div class=sidebar-about><span class=site__title><a href=https://harmstyler.me/>Tyler Harms</a></span><div class=author-image><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-src=https://harmstyler.me//img/tyler_portrait.jpg alt="Author Image" class="img--circle img--headshot element--center lazyload"></div><p class=site__description>A Software Development Blog</p></div><div class=collapsible-menu><input type=checkbox id=menuToggle>
<label for=menuToggle>Tyler Harms</label><div class=menu-content><nav class=sidebar-nav aria-label="Main Navigation"><ul><li><a href=/posts/><span>Posts</span></a></li><li><a href=/portfolio/><span>Portfolio</span></a></li><li><a href=/about/><span>About</span></a></li></ul></nav><section class=social><a href=https://indieweb.social/@harmstyler rel="me noopener" aria-label=Mastodon><i class="fab fa-mastodon fa-lg" aria-hidden=true></i></a>
<a href=https://github.com/harmstyler rel="me noopener" aria-label=GitHub><i class="fab fa-github fa-lg" aria-hidden=true></i></a>
<a href=https://gitlab.com/harmstyler rel="me noopener" aria-label=GitLab><i class="fab fa-gitlab fa-lg" aria-hidden=true></i></a>
<a href=https://instagram.com/harmstyler rel="me noopener" aria-label=Instagram><i class="fab fa-instagram fa-lg" aria-hidden=true></i></a>
<a href=https://linkedin.com/in/harmstyler rel="me noopener" aria-label=LinkedIn><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a>
<a href=https://stackoverflow.com/users/743245/harmstyler rel="me noopener" aria-label="Stack Overflow"><i class="fab fa-stack-overflow fa-lg" aria-hidden=true></i></a></section></div></div><div class=copyright>&copy; 2026 Tyler Harms</div></div></div><div class="content container"><article><header><h1>Solr Query for Mimicking SQL IN Operator Functionality</h1><div class=post__meta><i class="fas fa-calendar-alt"></i>&nbsp;Sep 13, 2012
in
<a class="badge badge-category" href=/categories/solr>SOLR</a><br>&nbsp;<i class="fas fa-tags"></i>
<a class="badge badge-tag" href=/tags/ez-find>ez find</a>
<a class="badge badge-tag" href=/tags/solr>solr</a>
<a class="badge badge-tag" href=/tags/sql>sql</a><br><i class="fas fa-clock"></i>&nbsp;2 min read</div></header><div class=post><img src=/img/select-query.jpg alt="Learning SQL" title="Learning SQL" class=pull-right loading=lazy decoding=async><p>I did a lot of playing around with solr to get this right. Unfortunately there is not a lot of documentation on searching within a certain field. With the SQL language you can search for multiple terms in a given field using the <code>IN</code> operator. In Solr you have the option of specifying a field using the <code>qf</code> operator, but what if you have more search terms searching other fields? The problem becomes far more complex. Given the following SQL statement how would we query Solr?</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=k>FROM</span><span class=w> </span><span class=k>table_name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=k>WHERE</span><span class=w> </span><span class=k>column_name</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=n>value1</span><span class=p>,</span><span class=n>value2</span><span class=p>,...)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=k>AND</span><span class=w> </span><span class=n>other_column</span><span class=o>=</span><span class=s1>&#39;foo&#39;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>There are couple of ways to do this, but I think there is one very good and much easier way. The first obvious way to query solr is to match the fields to columns manually.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>/select?q=*:*&amp;fq=column_name:value1 AND column_name:value2 AND other_colum:&#39;foo&#39;
</span></span></span></code></pre></td></tr></table></div></div><p>This is all fine and dandy but what if I want to be able to add a list of content to the query? Adding the column name every time can become a chore and make the query unnecessarily large. To do an <code>IN</code> query try this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>/select?q=*:*&amp;fq=column_name:+(value1 value2) AND other_colum:&#39;foo&#39;
</span></span></span></code></pre></td></tr></table></div></div><p>Having used this one before, I can tell you it works for me using Solr 3.6 and that the placement of the + symbol is key.</p><p>And what about a <code>NOT IN</code> query?</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=k>FROM</span><span class=w> </span><span class=k>table_name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=k>WHERE</span><span class=w> </span><span class=k>column_name</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=n>value1</span><span class=p>,</span><span class=n>value2</span><span class=p>,...)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=k>AND</span><span class=w> </span><span class=n>other_column</span><span class=o>=</span><span class=s1>&#39;foo&#39;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>The &lsquo;bad&rsquo; way:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>/select?q=*:*&amp;fq=-column_namevalue1 AND -column_name:value2 AND other_colum:&#39;foo&#39;
</span></span></span></code></pre></td></tr></table></div></div><p>This one I found from working with eZ Publish and eZ Find, and I happen to like it a lot. It is a clever little Solr query that selects all from the column then filters out what we don&rsquo;t want.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>/select?q=*:*&amp;fq=other_colum:&#39;foo&#39; AND column_name:[* TO *] -column_name:(value1 value2)
</span></span></span></code></pre></td></tr></table></div></div><p><code>column_name:[* TO *]</code> is like saying select all from the column, but then we add <code>-column_name:(value1 value2)</code> to filter out what we don&rsquo;t want.</p><p>Cheers and good luck!</p></div><div class="navigation navigation-single"><a href=/posts/2012/optimizing-solr-to-fit-your-needs-part-1/ class=navigation-prev><i aria-hidden=true class="fa fa-chevron-left"></i>
<span class=navigation-tittle>Optimizing Solr to fit your needs Part 1</span>
</a><a href=/posts/2012/aws-authorize-security-groups-across-acounts-shellrunner/ class=navigation-next><span class=navigation-tittle>AWS authorize security groups across acounts Â« ShellRunner</span>
<i aria-hidden=true class="fa fa-chevron-right"></i></a></div><div class=post__related><h2>Related Articles</h2><ul class=related-posts><li><span class=list__title--small><a href=/posts/2012/fixing-shards-in-ez-find/>Fixing Shards in eZ Find</a>
<time class="pull-right hidden-tablet">Jun 29, 2012</time></span></li><li><span class=list__title--small><a href=/posts/2012/ez-find-multi-core/>eZ Find Multi-Core</a>
<time class="pull-right hidden-tablet">Apr 20, 2012</time></span></li><li><span class=list__title--small><a href=/posts/2012/installing-ez-find/>Installing eZ Find</a>
<time class="pull-right hidden-tablet">Mar 22, 2012</time></span></li><li><span class=list__title--small><a href=/posts/2012/optimizing-solr-to-fit-your-needs-part-1/>Optimizing Solr to fit your needs Part 1</a>
<time class="pull-right hidden-tablet">Aug 25, 2012</time></span></li><li><span class=list__title--small><a href=/posts/2012/solr-3-6-update/>Solr 3.6 Update</a>
<time class="pull-right hidden-tablet">May 14, 2012</time></span></li></ul></div><div id=graphcomment></div><script type=text/javascript>window.graphcomment_id="harmstyler-me",function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://graphcomment.com/js/integration.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script></article></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-367546757"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-367546757")}</script><script defer src=https://use.fontawesome.com/releases/v5.5.0/js/all.js integrity=sha384-GqVMZRt5Gn7tB9D9q7ONtcp4gtHIUEW/yG7h98J7IpE3kpi+srfFyyB/04OV6pG0 crossorigin=anonymous></script><script type=text/javascript src=https://harmstyler.me/js/lazysizes.min.64304986998b78c207dc8b4c3da26cc22276e8b0260e7adc7172f39c35686ef216c931ad50af0239886d0d55c2e65f732d51804a62ddf45a686455117060b8e7.js integrity="sha512-ZDBJhpmLeMIH3ItMPaJswiJ26LAmDnrccXLznDVobvIWyTGtUK8COYhtDVXC5l9zLVGASmLd9FpoZFURcGC45w=="></script></body></html>