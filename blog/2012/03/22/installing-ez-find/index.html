
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Installing eZ Find - HarmsSite</title>
  <meta name="author" content="Tyler Harms">

  
  <meta name="description" content="&nbsp;
Alright, so lets begin installing eZ Find by going out and downloading it from the github (https://github.com/ezsystems/ezfind).
eZ Find is an &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://harmstyler.github.io/blog/2012/03/22/installing-ez-find">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="HarmsSite" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-23865520-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">HarmsSite</a></h1>
  
    <h2>Web Development Blog</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:harmstyler.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Installing eZ Find</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-22T00:00:00-05:00" pubdate data-updated="true">Mar 22<span>nd</span>, 2012</time>
        
      </p>
    
  </header>


<div class="entry-content">&nbsp;
<div><a href="http://harmssite.com/wp-content/uploads/2012/03/ezfind-extension.png"><img class=" wp-image-90 alignright" title="ezfind-extension" src="http://harmssite.com/wp-content/uploads/2012/03/ezfind-extension-300x169.png" alt="eZ Find extension in finder" width="270" height="152" /></a>Alright, so lets begin installing eZ Find by going out and downloading it from the github (<a title="eZ Find on GitHub" href="http://bit.ly/GEVOte ">https://github.com/ezsystems/ezfind</a>).</div>
eZ Find is an eZ Publish extension so: unzip the download, rename the fold &#8221;ezfind,&#8221; and then move the <em>ezfind</em> folder to the <em>extensions</em> directory of your eZ Publish install.

So, as with any extension, we have to activate it. Go into your override site.ini.append.php (settings/override/site.ini.append.php) and add ezfind to your active extension list (ActiveExtensions[]=ezfind). I added mine just after my main site extension. Easy enough so far right?<a href="http://harmssite.com/wp-content/uploads/2012/03/solr-structure.png"><img class="size-medium wp-image-93 alignright" title="solr-structure" src="http://harmssite.com/wp-content/uploads/2012/03/solr-structure-176x300.png" alt="Solr installed locally" width="176" height="300" /></a>

As you had probably already guessed, eZ Find will not without first setting up Solr. Luckily eZ Find comes with the recommended version of Solr for eZ Find. Within the eZ Find extension you should see a <em>java</em> directory (remember Solr is written in Java?). So what we need to do is copy the java directory and move it to the htdocs level of your eZ Publish intall and rename the folder &#8220;Solr&#8221; (see the image on the right). There is a lot in the solr directory that we will not need to mess with right now, specifically I will not cover the multicore options right now, just know that eZ Find can run multiple sites/cores on 1 Solr install. Also note that I just installed Solr locally, but it can also be installed on remote servers.<!--more-->

Now that we have solr installed we need to start it. Just open up terminal, navigate to your Solr install and from that directory run the following command.

<code>java -Dezfind -jar start.jar</code>

Eventually you want to have a job run Solr in the background, but for now running it in your console is more than satisfactory, plus it helps during development to see errors pop-up from time to time.

Next step, we need to create two files within our main site settings folder:
<ul>
	<li>ezfind.ini.append.php</li>
	<li>solr.ini.append.php</li>
</ul>
The ezfind ini can be left blank for now. Just know that you can modify a lot of eZ Find settings from within that ini. The solr ini however must edited now in order for search to work properly. Add the following lines to your Solr ini:
<code>
[SolrBase]
# Base URI of the Solr server
SearchServerURI=http://localhost:8983/solr
</code>
The localhost search server is actually already in the default solr ini file but I like to make sure I am controlling this by putting the line in my own ini file. Also, should your solr server be anything other than local, just change it&#8217;s location here.

So, we have eZ Find installed and activated, Solr installed and started, now all we need is an index to search. eZ Find comes with a nice script for updating the search index already so we just need to run it (run the command from the root install level just like you would the clear-cache script). Run the following script:

<code>php extension/ezfind/bin/php/updatesearchindexsolr.php -s &lt;admin siteaccess&gt; --php-exec=php --conc=2</code>

The script is pretty advanced. You need to specify the admin version of your siteaccess, mine would be harmssite_admin. You need to specify the number of cores to use, my local computer is a quad-core so I set conc=4 typcially. Setting the php-exec is optional. There is another optional parameter to send, clean or clean-all. Clean will clean the index of any prior content before updating it (i recommend using clean when developing). Clean-all is only used when you have multiple solr cores going and you want to clean them all at once, I don&#8217;t use clean-all often.

<a href="http://harmssite.com/wp-content/uploads/2012/03/index-update.png"><img class="size-medium wp-image-97 alignleft" title="index-update" src="http://harmssite.com/wp-content/uploads/2012/03/index-update-300x147.png" alt="Updating the Solr index with eZ Find" width="300" height="147" /></a>

Assuming everything went well you should have seen something similar to my screencap when updating the index.

Don&#8217;t worry if it didn&#8217;t work at first, just keep with it. Also, leave me a comment and I will respond.

Hope you enjoyed the post, I will try and do a post about a multi-core install sometime soon.
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Tyler Harms</span></span>

      








  


<time datetime="2012-03-22T00:00:00-05:00" pubdate data-updated="true">Mar 22<span>nd</span>, 2012</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://harmstyler.github.io/blog/2012/03/22/installing-ez-find/" data-via="harmstyler" data-counturl="http://harmstyler.github.io/blog/2012/03/22/installing-ez-find/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2012/03/19/ez-find-basics/" title="Previous Post: eZ Find Basics">&laquo; eZ Find Basics</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/03/26/despite-bings-rise-google-still-dominates-search-infographic/" title="Next Post: Despite Bings Rise, Google Still Dominates Search [INFOGRAPHIC]">Despite Bings Rise, Google Still Dominates Search [INFOGRAPHIC] &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/03/15/start-search-with-solr-integrating-solr-into-any-php-project-is-easy-with-solarium-repost/">Start Searching with Solr - Integrating Solr into any PHP project is easy with Solarium [REPOST]</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/03/02/symfony2-access-conrol/">Symfony2 Access Conrol</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/19/ez-publish-5-first-thoughts/">eZ Publish 5 - First Thoughts</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/07/optimizing-solr-to-fit-your-needs-part-2/">Optimizing Solr To Fit Your Needs Part 2</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/21/learning-symfony/">Learning Symfony</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/harmstyler">@harmstyler</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'harmstyler',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Tyler Harms -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
